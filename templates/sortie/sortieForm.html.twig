{% extends 'base.html.twig' %}

{% block body %}

    <div class="form">

        <h2>Ajouter une nouvelle sortie</h2>

        {{ form_start(sortieForm, {'action': path('app_sortie_validForm', {'id': app.user.id})}) }}


        {{ form_row(sortieForm.nom) }}
        {{ form_row(sortieForm.groupes) }}
        {{ form_row(sortieForm.dateHeureDebut) }}
        {{ form_row(sortieForm.duree) }}
        {{ form_row(sortieForm.dateLimiteInscription) }}
        {{ form_row(sortieForm.nbInscriptionMax) }}

        <div class="row g-2 align-items-center">
            <div class="row g-2 align-items-center">
                <div class="col">
                    {{ form_widget(sortieForm.lieu) }}
                </div>
            </div>
            <div class="col-auto">
                <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addLieuModal">+</button>
            </div>
        </div>


        {{ form_row(sortieForm.infosSortie) }}

        <button type="submit" class="btn btn-success mt-2">Envoyer !</button>

        {{ form_end(sortieForm) }}

    </div>

{#    modal pourajouter un lieu#}
    <div class="modal fade" id="addLieuModal" tabindex="-1" aria-labelledby="addLieuModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md">

            <div class="modal-content form">
                {{ form_start(lieuForm, {
                    'action' : path('app_sortie_ajoutLieu'),
                    'attr': {'id': 'addLieuForm'}}
                ) }}

                <div >

                    <div class="row g-2 align-items-center">
                        <div class="mb-3">
                            {{ form_label(lieuForm.ville) }}
                            {{ form_widget(lieuForm.ville, {'attr': {'id': 'selectVille', 'class': 'form-select'}}) }}
                            <a href="{{ path('app_ville_creer') }}">Ajouter une ville</a>
                        </div>

                    </div>
                    {{ form_row(lieuForm.nom) }}
                    {{ form_row(lieuForm.rue) }}
                    {{ form_row(lieuForm.latitude) }}
                    {{ form_row(lieuForm.longitude) }}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success">Ajouter</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                </div>
                {{ form_end(lieuForm) }}
            </div>
        </div>
    </div>


    <script>

    </script>
    <script src="{{ asset('scriptJS/ajoutLieu.js') }}"></script>
    <script src="{{ asset('scriptJS/ajoutVille.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

